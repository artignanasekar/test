<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>World of Bits ‚Äì Arti</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />

    <style>
      html,
      body,
      #app {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
      }

      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      }

      #app {
        display: flex;
        flex-direction: column;
        position: relative;
      }

      #map {
        flex: 1 1 auto;
      }

      #hud {
        flex: 0 0 auto;
        padding: 0.5rem 1rem;
        border-top: 1px solid #ddd;
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
        background: #fafafa;
        font-size: 0.9rem;
      }

      #hud-main {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        flex-wrap: wrap;
      }

      #hud-instructions {
        display: flex;
        flex-wrap: wrap;
        gap: 0.25rem 1rem;
        font-size: 0.75rem;
        color: #555;
      }

      #hud button {
        margin-left: auto;
        padding: 0.3rem 0.7rem;
        border-radius: 4px;
        border: 1px solid #ccc;
        background: white;
        cursor: pointer;
      }

      .token-label {
        background: rgba(0, 0, 0, 0.75);
        color: #fff;
        border-radius: 4px;
        padding: 0 4px;
        font-size: 0.75rem;
      }

      .player-circle {
        stroke: #222;
        stroke-width: 1;
        fill: #ffcc00;
      }

      .player-icon {
        font-size: 24px;
        line-height: 24px;
        text-align: center;
        transform: translate(-50%, -50%);
      }

      /* win overlay */

      #win-overlay {
        position: absolute;
        inset: 0;
        display: none; /* toggled on when the player wins */
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.55);
        z-index: 1000;
      }

      #win-overlay .win-card {
        background: #111827;
        color: #f9fafb;
        padding: 1rem 1.5rem;
        border-radius: 0.75rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        text-align: center;
        font-size: 0.9rem;
      }

      #win-overlay h2 {
        margin: 0 0 0.5rem;
        font-size: 1.2rem;
      }

      #win-overlay p {
        margin: 0.15rem 0;
      }

      .label {
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div id="map"></div>
      <div id="hud">
        <div id="hud-main">
          <span class="label">Score:</span>
          <span id="score">0</span>

          <span class="label">Held:</span>
          <span id="held">‚Äî</span>

          <span class="label">Best:</span>
          <span id="best-score">0</span>

          <span class="label">Goal:</span>
          <span id="goal-score">128</span>

          <button id="reset">Reset world</button>
        </div>
        <div id="hud-instructions">
          <span class="label">How to play:</span>
          <span>üê± = you. Use arrow keys or WASD to move.</span>
          <span>Click nearby cells to pick up / drop tokens.</span>
          <span>
            üüß <strong>C</strong> = craft table. Drop tokens here to combine
            them.
          </span>
          <span>
            üü© <strong>‚òÖ</strong> = bank. Click while holding a token to add its
            value to your Score and work toward the goal.
          </span>
        </div>
      </div>

      <div id="win-overlay">
        <div class="win-card">
          <h2>you win!</h2>
          <p>you reached the goal score for this run.</p>
          <p>press ‚ÄúReset world‚Äù below to start a fresh run.</p>
        </div>
      </div>
    </div>

    <!-- Leaflet JS (global L) -->
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>

    <!-- Your game entry point -->
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
